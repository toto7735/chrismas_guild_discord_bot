Index: me/toto/main/bot_main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import discord\r\nfrom discord.ext import tasks\r\nfrom discord.utils import get\r\n\r\nintents = discord.Intents.all()  # All but the two privileged ones\r\nclient = discord.Client(intents=intents)\r\n\r\n\r\n@client.event\r\nasync def on_ready():\r\n    print(client.user.id)\r\n    print(\"준비 완료!\")\r\n\r\n    game = discord.Game(\"하이픽셀 크리스마스 길드 디스코드 채팅\")\r\n    await client.change_presence(status=discord.Status.online, activity=game)\r\n    edit_total_member_channel_name.start()\r\n    edit_online_member_channel_name.start()\r\n\r\n\r\n@client.event\r\nasync def on_message(message):\r\n    if not isinstance(message.channel, discord.channel.DMChannel):\r\n        if message.channel.id == 833187276526845972:\r\n            if message.author == client.user:\r\n                return\r\n            if message.reference:\r\n                msg = await client.get_channel(message.channel.id).fetch_message(message.reference.message_id)\r\n                await message.channel.send(msg.embeds.description)\r\n        else:\r\n            if message.author == client.user:\r\n                return\r\n            if message.channel.id != 832982685944905771 and not await has_role(\"연산자\", message.author, message):\r\n                return\r\n\r\n            if message.content.startswith('/도움말'):\r\n                await send_help_message(message)\r\n            elif message.content.startswith('/문의'):\r\n                await send_inquiry_help_message(message)\r\n            elif message.content.startswith('/말하기'):\r\n                if not await has_role(\"연산자\", message.author, message):\r\n                    await message.channel.send(\"아쉽게도 권한이 없어서 안되겠네요. **연산자**\")\r\n                    return\r\n                if len(message.content) < 6:\r\n                    await message.channel.send(embed=custom_help_message(\"말하기\", \"/말하기 [내용]\", \"연산자\", discord.Colour.orange()))\r\n                    return\r\n                await message.delete()\r\n                await message.channel.send(message.content[4:])\r\n    elif isinstance(message.channel, discord.channel.DMChannel):\r\n        if message.author == client.user:\r\n            return\r\n        embed = discord.Embed(colour=discord.Colour.green(), title=\"문의가 접수되었습니다!\",\r\n                              description=\"관리진이 확인 후 1주일 내로 처리됩니다.\\n더 하실말씀이 있다면 계속 적어주세요.\")\r\n        await message.channel.send(embed=embed)\r\n        admin_embed = discord.Embed(colour=discord.Colour.gold(), title=\"문의 내용\", description=message.content)\r\n        await client.get_channel(833187276526845972).send(message.author.mention + \"**님의 문의** (처리하려면 이 메시지에 답변)\")\r\n        await client.get_channel(833187276526845972).send(embed=admin_embed)\r\n\r\n\r\nasync def send_help_message(message):\r\n    await message.channel.send('**__크리스마스 길드 디스코드 봇 도움말__**')\r\n    await message.channel.send('**[/도움말]** - 봇 도움말을 확인해요.')\r\n    await message.channel.send('**[/음악]** - 음악 관련 도움말를 확인해요. (준비중)')\r\n    await message.channel.send('**[/문의]** - 문의 관련 도움말를 확인 해요.')\r\n    await message.channel.send('**[/처벌]** - 처벌 관련 도움말을 확인 해요. (준비중)')\r\n\r\n\r\nasync def send_inquiry_help_message(message):\r\n    await message.channel.send('**문의 관련 도움말**')\r\n    await message.channel.send('문의 (유저 신고, 관리자 신청, 기타 관리자와 소통)은 **저**(DM)를 통해 받고 있습니다. 저에게 메시지를 보내시면 최대한 빨리 처리해 드리겠습니다!')\r\n\r\n\r\n@client.event\r\nasync def on_raw_reaction_add(payload):\r\n    if payload.message_id != 833332871615610902:\r\n        return\r\n    if payload.emoji.name == \"\uD83D\uDC96\":\r\n        guild = client.get_guild(payload.guild_id)\r\n        role = get(guild.roles, id=833190627897638943)\r\n        await payload.member.add_roles(role)\r\n    elif payload.emoji.name == \"\uD83C\uDF68\":\r\n        guild = client.get_guild(payload.guild_id)\r\n        role = get(guild.roles, id=833697054605180929)\r\n        await payload.member.add_roles(role)\r\n\r\n\r\n@client.event\r\nasync def on_raw_reaction_remove(payload):\r\n    if payload.message_id != 833332871615610902:\r\n       return\r\n    if payload.emoji.name == \"\uD83D\uDC96\":\r\n        guild = client.get_guild(payload.guild_id)\r\n        member = await guild.fetch_member(payload.user_id)\r\n        role = get(guild.roles, id=833190627897638943)\r\n        await member.remove_roles(role)\r\n    elif payload.emoji.name == \"\uD83C\uDF68\":\r\n        guild = client.get_guild(payload.guild_id)\r\n        member = await guild.fetch_member(payload.user_id)\r\n        role = get(guild.roles, id=833697054605180929)\r\n        await member.remove_roles(role)\r\n\r\n\r\nasync def has_role(role, user, message):\r\n    role = discord.utils.find(lambda r: r.name == role, message.guild.roles)\r\n    if role in user.roles:\r\n        return True\r\n    else:\r\n        return False\r\n\r\n\r\ndef custom_help_message(command, usage, permission, color):\r\n    embed = discord.Embed(colour=color, title=\"**\" + command + \"** 도움말\", description=usage + \" - **\" + permission + \"** 권한이 필요해요.\")\r\n    return embed\r\n\r\n\r\n@tasks.loop(seconds=600)\r\nasync def edit_total_member_channel_name():\r\n    total_member_channel = client.get_channel(833592614535561247)\r\n    total_members = sum(not member.bot for member in client.get_all_members())\r\n    await total_member_channel.edit(name=\"\uD83C\uDF0E 총 인원 : \" + str(total_members) + \"명\")\r\n\r\n\r\n@tasks.loop(seconds=600)\r\nasync def edit_online_member_channel_name():\r\n    online_members = sum(member.status != discord.Status.offline and not member.bot for member in client.get_all_members())\r\n    online_member_channel = client.get_channel(833698038245359677)\r\n    await online_member_channel.edit(name=\"⚽ 온라인 인원 : \" + str(online_members) + \"명\")\r\n\r\nclient.run(\"ODMyOTc5MDk2NDUxNTQ3MTU2.YHrqPA.UmvRvLbaI3XcXDIK3pP-E3lYadE\")
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/me/toto/main/bot_main.py b/me/toto/main/bot_main.py
--- a/me/toto/main/bot_main.py	(revision 72085a12fd0dffc4ea86a585101a17b12d1893cd)
+++ b/me/toto/main/bot_main.py	(date 1619164976640)
@@ -1,4 +1,5 @@
 import discord
+import os
 from discord.ext import tasks
 from discord.utils import get
 
@@ -15,6 +16,7 @@
     await client.change_presence(status=discord.Status.online, activity=game)
     edit_total_member_channel_name.start()
     edit_online_member_channel_name.start()
+    print(discord.__version__)
 
 
 @client.event
@@ -125,4 +127,5 @@
     online_member_channel = client.get_channel(833698038245359677)
     await online_member_channel.edit(name="⚽ 온라인 인원 : " + str(online_members) + "명")
 
-client.run("ODMyOTc5MDk2NDUxNTQ3MTU2.YHrqPA.UmvRvLbaI3XcXDIK3pP-E3lYadE")
\ No newline at end of file
+access_token = os.environ["BOT_TOKEN"]
+client.run(access_token)
\ No newline at end of file
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"6ab53467-09f9-44f4-b848-f0565a939253\" name=\"Default Changelist\" comment=\"First upload\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/.gitignore\" beforeDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"FileTemplateManagerImpl\">\r\n    <option name=\"RECENT_TEMPLATES\">\r\n      <list>\r\n        <option value=\"Jupyter Notebook\" />\r\n        <option value=\"Python Script\" />\r\n      </list>\r\n    </option>\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"GitSEFilterConfiguration\">\r\n    <file-type-list>\r\n      <filtered-out-file-type name=\"LOCAL_BRANCH\" />\r\n      <filtered-out-file-type name=\"REMOTE_BRANCH\" />\r\n      <filtered-out-file-type name=\"TAG\" />\r\n      <filtered-out-file-type name=\"COMMIT_BY_MESSAGE\" />\r\n    </file-type-list>\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"1rIlOB9Wx0RhzlmfSAX03K48aXc\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showExcludedFiles\" value=\"false\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\">\r\n    <property name=\"RunOnceActivity.OpenProjectViewOnStart\" value=\"true\" />\r\n    <property name=\"RunOnceActivity.ShowReadmeOnStart\" value=\"true\" />\r\n    <property name=\"WebServerToolWindowFactoryState\" value=\"false\" />\r\n    <property name=\"aspect.path.notification.shown\" value=\"true\" />\r\n    <property name=\"last_opened_file_path\" value=\"$PROJECT_DIR$\" />\r\n    <property name=\"project.structure.last.edited\" value=\"SDKs\" />\r\n    <property name=\"project.structure.proportion\" value=\"0.0\" />\r\n    <property name=\"project.structure.side.proportion\" value=\"0.2\" />\r\n    <property name=\"settings.editor.selected.configurable\" value=\"discord-application\" />\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"bot_main\" type=\"PythonConfigurationType\" factoryName=\"Python\" temporary=\"true\" nameIsGenerated=\"true\">\r\n      <module name=\"크리스마스_길드_디스코드_봇\" />\r\n      <option name=\"INTERPRETER_OPTIONS\" value=\"\" />\r\n      <option name=\"PARENT_ENVS\" value=\"true\" />\r\n      <envs>\r\n        <env name=\"PYTHONUNBUFFERED\" value=\"1\" />\r\n      </envs>\r\n      <option name=\"SDK_HOME\" value=\"\" />\r\n      <option name=\"WORKING_DIRECTORY\" value=\"$PROJECT_DIR$/me/toto/main\" />\r\n      <option name=\"IS_MODULE_SDK\" value=\"true\" />\r\n      <option name=\"ADD_CONTENT_ROOTS\" value=\"true\" />\r\n      <option name=\"ADD_SOURCE_ROOTS\" value=\"true\" />\r\n      <EXTENSION ID=\"PythonCoverageRunConfigurationExtension\" runner=\"coverage.py\" />\r\n      <option name=\"SCRIPT_NAME\" value=\"G:\\프로젝트\\인텔리제이\\Python\\크리스마스_길드_디스코드_봇\\me\\toto\\main\\bot_main.py\" />\r\n      <option name=\"PARAMETERS\" value=\"\" />\r\n      <option name=\"SHOW_COMMAND_LINE\" value=\"false\" />\r\n      <option name=\"EMULATE_TERMINAL\" value=\"false\" />\r\n      <option name=\"MODULE_MODE\" value=\"false\" />\r\n      <option name=\"REDIRECT_INPUT\" value=\"false\" />\r\n      <option name=\"INPUT_FILE\" value=\"\" />\r\n      <method v=\"2\" />\r\n    </configuration>\r\n    <recent_temporary>\r\n      <list>\r\n        <item itemvalue=\"Python.bot_main\" />\r\n      </list>\r\n    </recent_temporary>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"6ab53467-09f9-44f4-b848-f0565a939253\" name=\"Default Changelist\" comment=\"\" />\r\n      <created>1618671450490</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1618671450490</updated>\r\n      <workItem from=\"1618671451814\" duration=\"4745000\" />\r\n      <workItem from=\"1618714331309\" duration=\"1455000\" />\r\n      <workItem from=\"1618715834315\" duration=\"16226000\" />\r\n      <workItem from=\"1618750649806\" duration=\"8290000\" />\r\n      <workItem from=\"1618813113446\" duration=\"4803000\" />\r\n      <workItem from=\"1618818190980\" duration=\"6000\" />\r\n      <workItem from=\"1618838155791\" duration=\"2814000\" />\r\n      <workItem from=\"1618902325053\" duration=\"2064000\" />\r\n      <workItem from=\"1618989367861\" duration=\"1454000\" />\r\n      <workItem from=\"1619007845282\" duration=\"8294000\" />\r\n      <workItem from=\"1619073058780\" duration=\"4046000\" />\r\n      <workItem from=\"1619089943198\" duration=\"960000\" />\r\n      <workItem from=\"1619092276771\" duration=\"5408000\" />\r\n      <workItem from=\"1619159207900\" duration=\"1113000\" />\r\n      <workItem from=\"1619160476447\" duration=\"334000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"First upload\">\r\n      <created>1619160416652</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1619160416652</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"2\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n    <option name=\"oldMeFiltersMigrated\" value=\"true\" />\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"First upload\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"First upload\" />\r\n  </component>\r\n  <component name=\"com.intellij.coverage.CoverageDataManagerImpl\">\r\n    <SUITE FILE_PATH=\"coverage/___$bot.coverage\" NAME=\"bot Coverage Results\" MODIFIED=\"1619159211616\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"true\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/me/toto/main\" />\r\n    <SUITE FILE_PATH=\"coverage/___$Bot.coverage\" NAME=\"Bot Coverage Results\" MODIFIED=\"1619094102205\" SOURCE_PROVIDER=\"com.intellij.coverage.DefaultCoverageFileProvider\" RUNNER=\"coverage.py\" COVERAGE_BY_TEST_ENABLED=\"true\" COVERAGE_TRACING_ENABLED=\"false\" WORKING_DIRECTORY=\"$PROJECT_DIR$/me/toto/main\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 72085a12fd0dffc4ea86a585101a17b12d1893cd)
+++ b/.idea/workspace.xml	(date 1619164939692)
@@ -2,13 +2,15 @@
 <project version="4">
   <component name="ChangeListManager">
     <list default="true" id="6ab53467-09f9-44f4-b848-f0565a939253" name="Default Changelist" comment="First upload">
-      <change beforePath="$PROJECT_DIR$/.idea/.gitignore" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/me/toto/main/bot_main.py" beforeDir="false" afterPath="$PROJECT_DIR$/me/toto/main/bot_main.py" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
     <option name="LAST_RESOLUTION" value="IGNORE" />
   </component>
+  <component name="ChangesViewManager" show_ignored="true" />
   <component name="FileTemplateManagerImpl">
     <option name="RECENT_TEMPLATES">
       <list>
@@ -36,6 +38,7 @@
     <option name="showLibraryContents" value="true" />
   </component>
   <component name="PropertiesComponent">
+    <property name="ChangesTree.GroupingKeys" value="" />
     <property name="RunOnceActivity.OpenProjectViewOnStart" value="true" />
     <property name="RunOnceActivity.ShowReadmeOnStart" value="true" />
     <property name="WebServerToolWindowFactoryState" value="false" />
@@ -97,7 +100,7 @@
       <workItem from="1619089943198" duration="960000" />
       <workItem from="1619092276771" duration="5408000" />
       <workItem from="1619159207900" duration="1113000" />
-      <workItem from="1619160476447" duration="334000" />
+      <workItem from="1619160476447" duration="1862000" />
     </task>
     <task id="LOCAL-00001" summary="First upload">
       <created>1619160416652</created>
@@ -106,7 +109,21 @@
       <option name="project" value="LOCAL" />
       <updated>1619160416652</updated>
     </task>
-    <option name="localTasksCounter" value="2" />
+    <task id="LOCAL-00002" summary="First upload">
+      <created>1619160820684</created>
+      <option name="number" value="00002" />
+      <option name="presentableId" value="LOCAL-00002" />
+      <option name="project" value="LOCAL" />
+      <updated>1619160820684</updated>
+    </task>
+    <task id="LOCAL-00003" summary="First upload">
+      <created>1619160945478</created>
+      <option name="number" value="00003" />
+      <option name="presentableId" value="LOCAL-00003" />
+      <option name="project" value="LOCAL" />
+      <updated>1619160945478</updated>
+    </task>
+    <option name="localTasksCounter" value="4" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -130,6 +147,7 @@
   </component>
   <component name="com.intellij.coverage.CoverageDataManagerImpl">
     <SUITE FILE_PATH="coverage/___$bot.coverage" NAME="bot Coverage Results" MODIFIED="1619159211616" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="true" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/me/toto/main" />
+    <SUITE FILE_PATH="coverage/___$bot_main.coverage" NAME="bot_main Coverage Results" MODIFIED="1619162223881" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="true" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/me/toto/main" />
     <SUITE FILE_PATH="coverage/___$Bot.coverage" NAME="Bot Coverage Results" MODIFIED="1619094102205" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="true" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/me/toto/main" />
   </component>
 </project>
\ No newline at end of file
